<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>
</title>
<meta http-equiv="Content-Type" content="text/html;charset=windows-1251">
</head>
<body TEXT="#000000" BGCOLOR="#E7E3E7"  LINK="#004080" VLINK="#004080" olink="#008080">
<table COLS="3" WIDTH="16%">
<tr>
<td>
<font face="Verdana" size="3">
<a href="Index2.html">
<img SRC="Back.gif" BORDER="0">
</a>
</font>
</td>
<td WIDTH="10%">
<font face="Verdana" size="3">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0">
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Verdana" size="3">
<a href="Index4.html">
<img SRC="For.gif" BORDER="0">
</a>
</font>
</td>
</tr>
</table>
<P><font face="Verdana" size="3">
&nbsp;
</font ></P>
<p align="center">
<font face="Verdana" size="3">
<font size="4">Класс TObject</font>
<br>
</font>
</P>
<p align="left">
<font face="Verdana" size="3">

</font ></P>
<P><font face="Verdana" size="3">
Класс <font face="Verdana" size="2"> TObject</font> является родоначальником всей иерархии использующихся в Delphi классов VCL. Он реализует функции, которые обязательно будет выполнять любой объект, который может быть создан в среде разработки. Учитывая гигантское разнообразие возможных областей применения объектов в процессе создания приложений, можно сказать, что круг общих для всех классов операций весьма невелик.
</font ></P>
<P><font face="Verdana" size="3">
В первую очередь — это создание экземпляра объекта и его уничтожение. Любой объект выполняет эти две операции в обязательном порядке. Процесс создания объекта включает выделение области адресного пространства, установку указателя на экземпляр объекта, задание начальных значений свойств и выполнение установочных действий, связанных с назначением объекта. В общем случае две последние операции могут не выполняться.
</font ></P>
<P><font face="Verdana" size="3">
Указатель на экземпляр объекта передается в переменную объектного типа, которая в дальнейшем будет идентифицировать объект в программном коде приложения. В приведенном выше фрагменте кода переменная объектного типа
<font face="Verdana" size="2"> someList</font> объявлена как экземпляр типа
<font face="Verdana" size="2">TStrings</font>. При создании экземпляра этого типа конструктор
<font face="Verdana" size="2"> Create</font> возвращает в переменную
<font face="Verdana" size="2"> SomeList</font> указатель на выделенную для нового объекта область памяти. Для этого применяется метод
<font face="Verdana" size="2">Newinstance</font>, который вызывается в конструкторе автоматически:
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
class function Newinstance: TObject; virtual;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
Объект класса <font face="Verdana" size="2"> TObject</font> обеспечивает выполнение этого процесса для любого порожденного от него объекта. А уже внутри конструктора, который унаследован от класса
<font face="Verdana" size="2">TObject</font>, можно предусмотреть инициализацию переменных и выполнение дополнительных операций. Объявление конструктора выглядит следующим образом:
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
&nbsp;<font face="Verdana" size="2">constructor Create;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
В конструкторах потомков это объявление может перекрываться, но при необходимости вызвать конструктор предка используется оператор
<font face="Verdana" size="2">inherited</font>:
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
constructor TSomeObject.Create;&nbsp;</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2"> begin&nbsp;</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2"> inherited Create;</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">...</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
end;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
Для уничтожения экземпляра объекта в классе
<font face="Verdana" size="2"> TObject</font> предназначены методы
<font face="Verdana" size="2"> Destroy</font> и <font face="Verdana" size="2">Free</font>:
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
destructor Destroy; virtual;&nbsp;</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2"> procedure Free;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
Как видно из объявления, настоящим деструктором является метод Destroy. Он обеспечивает освобождение всех занимаемых экземпляром объекта ресурсов. Обычно при создании новых классов деструктор всегда перекрывается для того, чтобы корректно завершить работу с данными.
</font ></P>
<P><font face="Verdana" size="3">
<B>      Примечание</B>
</font ></P>
<blockquote>
  <P><font face="Verdana" size="3"> Обратите внимание, что обычно унаследованный 
    конструктор вызывается в первую очередь. Это необходимо для того, чтобы выполнить 
    все нужные операции при создании объекта до инициализации его собственных 
    свойств. При уничтожении объекта обычно сначала выполняются завершающие операции 
    и только в самом конце вызывается унаследованный деструктор, чтобы выполнить 
    собственно уничтожение объекта. </font ></P>
</blockquote>
<P><font face="Verdana" size="3">
При уничтожении объектов рекомендуется вместо деструктора использовать метод
<font face="Verdana" size="2">Free</font>, который просто вызывает деструктор, но перед этим проверяет, чтобы указатель на экземпляр объекта был не пустым (не был равен
<font face="Verdana" size="2">Nil</font>). Это позволяет избежать серьезных ошибок.
</font ></P>
<P><font face="Verdana" size="3">
Если объект является владельцем других объектов (например, форма владеет всеми размещенными на ней компонентами), то его метод
<font face="Verdana" size="2"> Free</font> автоматически вызовет эти же методы для всех объектов. Поэтому при закрытии формы разработчик избавлен от необходимости заботиться об уничтожении всех компонентов.
</font ></P>
<P><font face="Verdana" size="3">
Для освобождения занимаемой объектом памяти деструктор автоматически Вызывает метод
<font face="Verdana" size="2">Freelnstance</font>:
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
procedure Freelnstance; virtual;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
Каждый объект должен содержать некоторую информацию о себе, которая используется приложением и средой разработки. Поэтому класс
<font face="Verdana" size="2"> TObject</font> содержит ряд методов, обеспечивающих представление этой информации в потомках.
</font ></P>
<P><font face="Verdana" size="3">
Метод
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
class function Classlnfo: Pointer;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
возвращает указатель на таблицу информации времени выполнения (RTTI). Эта информация используется в среде разработки и в приложении.
</font ></P>
<P><font face="Verdana" size="3">
Функция
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
class function ClassName: ShortString;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
возвращает имя типа объекта, которое может быть использовано для идентификации. Например, один метод-обработчик щелчка на кнопке может работать с несколькими типами компонентов кнопок:
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
procedure TForml.BitBtnlClick(Sender: TObject);</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">&nbsp;begin&nbsp;</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2"> if Sender is TBitBtn</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
then TBitBtn(Sender).Enabled := False;</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">&nbsp;if Sender is TSpeedButton</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
then TSpeedButton(Sender).Down := True;</font>
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">&nbsp; end;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
Метод
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
class function ClassNamels(const Name: string): Boolean;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
позволяет определить, является ли данный объект того типа, имя которого передано в параметре
<font face="Verdana" size="2">Name</font>. В случае положительного ответа функция возвращает
<font face="Verdana" size="2">True</font>.
</font ></P>
<P><font face="Verdana" size="3">
Как известно, программирование для Windows основано на событиях. Каждое приложение и каждый программный объект должны уметь реагировать на сообщение о событиях и, в свою очередь, рассылать сообщения. В выполнении этих операций заключается третья общая для всех объектов функция.
</font ></P>
<P><font face="Verdana" size="3">
Метод
</font ></P>
<blockquote>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
procedure Dispatch(var Message); virtual;</font>
</font ></P>
</blockquote>
<P><font face="Verdana" size="3">
осуществляет обработку сообщений, поступающих объекту. Он определяет, сможет ли объект обработать сообщение при помощи собственных обработчиков событий. В случае отсутствия таких методов сообщение передается аналогичному методу
<font face="Verdana" size="2"> Dispatch</font> класса-предка (если он есть).
</font ></P>
<P><font face="Verdana" size="3">
Класс <font face="Verdana" size="2"> TObject</font> имеет предопределенный обработчик событий:
</font ></P>
<P><font face="Verdana" size="3">
<font face="Verdana" size="2">
procedure DefaultHandler(var Message); virtual;</font>
</font ></P>
<P><font face="Verdana" size="3">
Кроме рассмотренных здесь методов, класс <font face="Verdana" size="2"> TObject</font> имеет еще несколько методов, которые в основном применяются для взаимодействия объекта со средой разработки.
</font ></P>
<P><font face="Verdana" size="3">
В целом класс <font face="Verdana" size="2"> TObject</font> может служить для создания на его основе некоторых простых классов для использования в приложениях.
</font ></P>


<P><font face="Verdana" size="3">
&nbsp;
</font ></P>
<table COLS="3" WIDTH="16%">
<tr>
<td>
<font face="Verdana" size="3">
<a href="Index2.html">
<img SRC="Back.gif" BORDER="0">
</a>
</font>
</td>
<td WIDTH="10%">
<font face="Verdana" size="3">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0">
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Verdana" size="3">
<a href="Index4.html">
<img SRC="For.gif" BORDER="0">
</a>
</font>
</td>
</tr>
</table>
</body>
</html>
